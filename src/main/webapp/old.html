#set($ctx=$request.contextPath)
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>李斌&梁洁的婚礼弹幕Show</title>
<style type="text/css">
	html, body {
		height: 100%;
		padding: 0;
		margin: 0;
	}
	.danmu_div {
		/*
		height: 100%;
		width: 100%;
		z-index: 9999;
		
		*/
		background: #000000;
	}
</style>
<script type="text/javascript" src="$ctx/js/jquery.min.js"></script>
<script type="text/javascript" src="$ctx/js/jquery.danmu.min.js"></script>
</head>
<body>
<!-- 弹幕 -->
<div id="danmu" class="danmu_div"></div>
<!-- 相册 -->

</body>
<script type="text/javascript">
	$(function(){
		var danmuss = {};
		var container = $("#danmu");
		container.danmu({
			left: 0,
			top: 0 ,
			height: "100%", //区域的高度 
			width: "100%", //区域的宽度 
			zindex: 9999, //div的css样式zindex
			speed: 20000, //弹幕速度，飞过区域的毫秒数 
			sumtime: 900 , //弹幕运行总时间
			danmuss: danmuss, //danmuss对象，运行时的弹幕内容 
			default_font_color: "#ffffff", //弹幕默认字体颜色 
			font_size_small: 16, //小号弹幕的字体大小,注意此属性值只能是整数
			font_size_big: 24, //大号弹幕的字体大小 
			opacity: "0.9", //弹幕默认透明度 
			top_botton_danmu_time:6000 //顶端底端弹幕持续时间
		});
		container.danmu('danmu_start'); 
		var websocket = new WebSocket("wss://${host}/danmusocket");
		websocket.onmessage = function(evt) {
			//console.log(evt);
			/*
			text——弹幕文本内容。 
			color——弹幕颜色。 
			position——弹幕位置 “0”为滚动 “1” 为顶部 “2”为底部 
			size——弹幕文字大小。 “0”为小字 ”1”为大字
			time——弹幕所出现的时间。 单位为”分秒“（及1/10秒，100毫秒）
			isnew——当出现该属性时（属性值科委任意），会认为这是用户新发的弹幕，从而弹幕在显示的时候会有边框。
			*/
			
			/*
			var str = {
				text : evt.data,
				color: "#000000",
				size : "1",
				position : "0",
				time : container.data("nowtime") + 1
			};
			*/
			console.log(danmuss);
			container.danmu("add_danmu",{
				text : evt.data,
				//color: "#000000",
				size : "1",
				position : "0",
				time : container.data("nowtime") + 5
			});
		}
	});
</script>
</html>