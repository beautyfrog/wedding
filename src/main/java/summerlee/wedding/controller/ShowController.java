package summerlee.wedding.controller;import javax.servlet.http.HttpServletRequest;import org.apache.commons.lang3.StringUtils;import org.slf4j.Logger;import org.slf4j.LoggerFactory;import org.springframework.stereotype.Controller;import org.springframework.ui.Model;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.ResponseBody;import summerlee.wedding.websocket.Broadcaster;/** * 基础控制器 *  * @file BaseController * @author libin * @Create 2016-12-26 */@Controllerpublic class ShowController {		private final Logger logger = LoggerFactory.getLogger(this.getClass());		@RequestMapping(value="/")	public String index(Model model, HttpServletRequest request) {		model.addAttribute("host", request.getHeader("Host"));		model.addAttribute("port", request.getLocalPort());		return "index";	}		@RequestMapping(value="/pop")	public @ResponseBody String danmu(String danmu, String firend, String avatar) {		logger.info("Received danmu : \"{}\" from firend : {}", danmu, firend);		//System.out.println("Received danmu : " + danmu + " from firend : " + firend);		if(StringUtils.isNotBlank(danmu)){			Broadcaster.addDanmu(danmu);		}		return "success";	}}